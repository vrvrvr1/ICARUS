<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SIA</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.min.css" rel="stylesheet" />
<!-- Swiper CSS -->
  <link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"
/>


  <!-- CSS -->
  <link rel="stylesheet" href="/css/homepage.css">

  <!-- Critical inline fixes (temporary) to ensure "Shop by" layout renders even if external CSS is cached/not loaded -->
  <style>
    /* full-bleed shop banner (temporary inline to ensure immediate effect) */
    /* Visual polish: compact vertical rhythm, card styling, prominent imagery and refined CTAs */
    .shop-banner{display:flex !important;flex-direction:column !important;gap:12px;width:100vw !important;max-width:100vw !important;margin:12px calc(50% - 50vw) 20px !important;padding:0 !important}

    /* Card base: remove gray backgrounds and shadows for a cleaner look */
    .shop-col{
      width:100% !important;
      height:260px !important;
      display:flex !important;
      align-items:center !important;
      justify-content:center !important;
      text-decoration:none !important;
      padding:8px 0 !important;
      background:#fff; /* removed white/gray card */
      border-radius:12px;
      overflow:hidden;
      box-shadow:none; /* removed gray shadow */
      transition:none;
      position:relative;
    }
  /* Hover effects removed — keep card static */
  .shop-col:hover{transform:none;box-shadow:none}

  /* Make the image panel larger so visuals grab attention; ensure images fill their panel but do not crop */
      /* Slight permanent zoom so images read larger without hover behavior */
      .shop-col .shop-img{transition:transform .36s ease, opacity .36s ease;display:block;width:100%;height:100%;transform:scale(1.06);transform-origin:center center}
      .shop-col:hover .shop-img{transform:scale(1.06)}

    /* Text block vertically centered and tuned typography */
    .shop-col .col-content{height:100%;display:flex;flex-direction:column;justify-content:center;text-align:center !important;padding:0 16px !important}
  .shop-col .col-content h3{font-size:1.7rem;margin:0 0 6px;color:#000;font-weight:600}
  /* Use pure black for subtitle and content text */
  .shop-col .col-content{color:#000}
  .shop-col .shop-subtitle{color:#000;font-size:0.98rem;margin-bottom:10px}

  /* Explore link styles moved to external CSS for easier maintenance */

    /* image panels — larger and positioned left/right per section */
    .shop-col--men{background:none !important}
  .shop-col--men .shop-img{position:absolute;left:0;top:0;bottom:0;width:64%;height:100%;object-fit:contain;object-position:center center;background-color:transparent;border-radius:12px 0 0 12px;z-index:1}
  .shop-col--men .overlay{position:absolute;left:0;top:0;bottom:0;width:56%;background:transparent;border-radius:12px 0 0 12px;z-index:2;pointer-events:none}
  .shop-col--men .col-content{position:relative !important;z-index:3;margin-left:64% !important;text-align:left !important;padding:0 32px !important}

    .shop-col--women{background:none !important}
  .shop-col--women .shop-img{position:absolute;right:0;top:0;bottom:0;width:64%;height:100%;object-fit:contain;object-position:center center;background-color:transparent;border-radius:0 12px 12px 0;z-index:1}
  .shop-col--women .overlay{position:absolute;right:0;top:0;bottom:0;width:56%;background:transparent;border-radius:0 12px 12px 0;z-index:2;pointer-events:none}
  .shop-col--women .col-content{position:relative !important;z-index:3;margin-right:64% !important;text-align:left !important;padding:0 32px !important}

    .shop-col--unisex{background:none !important}
  .shop-col--unisex .shop-img{position:absolute;left:0;top:0;bottom:0;width:64%;height:100%;object-fit:contain;object-position:center center;background-color:transparent;border-radius:12px 0 0 12px;z-index:1}
  .shop-col--unisex .overlay{position:absolute;left:0;top:0;bottom:0;width:56%;background:transparent;border-radius:12px 0 0 12px;z-index:2;pointer-events:none}
  .shop-col--unisex .col-content{position:relative !important;z-index:3;margin-left:64% !important;text-align:left !important;padding:0 32px !important}

    /* Responsive behaviour: hide image panels on very small screens and tighten heights */
    @media (max-width:1000px){
      .shop-col{height:220px !important}
      .shop-col--men .shop-img,.shop-col--women .shop-img,.shop-col--unisex .shop-img{width:60%}
      .shop-col--men .col-content,.shop-col--women .col-content,.shop-col--unisex .col-content{margin-left:60% !important;margin-right:60% !important;padding:0 18px !important}
    }
    @media (max-width:640px){
      .shop-banner{flex-direction:column !important}
      .shop-col{width:100% !important;height:140px !important;padding:6px 0 !important}
      .shop-col--men .shop-img,.shop-col--women .shop-img,.shop-col--unisex .shop-img{display:none}
      .shop-col .col-content{margin:0 !important;text-align:center !important;padding:0 12px !important}
      .shop-col .col-content h3{font-size:1.25rem}
    }
  </style>
  <!-- Product badge styles -->
  <style>
    .product-card{ position:relative; }
    .product-badges{ position:absolute; top:8px; left:8px; display:flex; flex-direction:column; gap:6px; z-index:10; }
  .product-badges .badge-new, .discount-badge { font-size:12px; padding:6px 8px; border-radius:6px; color:#fff; font-weight:700; text-transform:uppercase; display:inline-flex; align-items:center; gap:6px; }
  .product-badges .badge-new{ background:#ff6b6b; }
    /* keep existing discount look but ensure it sits with other badges */
    .discount-badge{ background:#111827; }
    /* icon spacing */
    .product-badges i { font-size:14px; line-height:1; }
    /* visually-hidden helper (Bootstrap provides .visually-hidden) fallback */
    .visually-hidden { position: absolute !important; width: 1px !important; height: 1px !important; padding: 0 !important; margin: -1px !important; overflow: hidden !important; clip: rect(0,0,0,0) !important; white-space: nowrap !important; border: 0 !important; }
  </style>

</head>
<body>
<!-- Header -->
    <nav>
    <%- include ("../partials/header.ejs") %>
    </nav>

<!-- Announcements removed -->

<!-- Image -->
  <section class="hero"<% if (cmsHome && cmsHome.hero_image_url) { %> style="background: linear-gradient(135deg, rgba(0,0,0,0.4), rgba(255,107,107,0.3)), url('<%= cmsHome.hero_image_url %>'); background-size: cover; background-position: center; background-repeat: no-repeat;"<% } %>>
        <div class="hero-content">
        <h1 class="hero-title"><%- (cmsHome && cmsHome.hero_title) ? cmsHome.hero_title.replace('limits', "<span class='highlight'>limits</span>") : 'Rise beyond <span class=\'highlight\'>limits</span>' %></h1>
      <p class="hero-subtitle"><%= (cmsHome && cmsHome.hero_subtitle) || 'Because limits are meant to be broken.' %></p>
      <a href="<%= (cmsHome && cmsHome.cta_href) || '/products' %>" class="cta-button"><%= (cmsHome && cmsHome.cta_text) || 'Shop the Collection' %></a>
        </div>
    </section>

<!-- Shop by Section -->
<!-- Shop by Section (Full-width banner with three columns) -->
<section class="shop-by-section">
  <div class="shop-banner">
  <a href="/products#mens" class="shop-col shop-col--men" aria-label="Men's Apparel">
      <img class="shop-img" src="/image/men.png" alt="Men's apparel" loading="lazy" onerror="this.onerror=null;this.src='/image/men.svg'" />
      <div class="overlay"></div>
      <div class="col-content">
        <h3>Men's Apparel</h3>
        <div class="shop-subtitle">Performance-driven gym staples built to move with you.</div>
        <div class="shop-link">Explore Men's</div>
      </div>
    </a>
  <a href="/products?category=women" class="shop-col shop-col--women" aria-label="Women's Apparel">
      <img class="shop-img" src="/image/women.png" alt="Women's apparel" loading="lazy" onerror="this.onerror=null;this.src='/image/women.svg'" />
      <div class="overlay"></div>
      <div class="col-content">
        <h3>Women's Apparel</h3>
        <div class="shop-subtitle">Engineered fits and fabrics for confidence and comfort.</div>
        <div class="shop-link">Explore Women's</div>
      </div>
    </a>
  <a href="/products?category=unisex" class="shop-col shop-col--unisex" aria-label="Unisex Apparel">
      <img class="shop-img" src="/image/unisex.png" alt="Unisex apparel" loading="lazy" onerror="this.onerror=null;this.src='/image/unisex.svg'" />
      <div class="overlay"></div>
      <div class="col-content">
        <h3>Unisex</h3>
        <div class="shop-subtitle">Flexible, everyday activewear for every body.</div>
        <div class="shop-link">Explore Unisex</div>
      </div>
    </a>
  </div>
</section>

<h2 style="font-family: 'Poppins', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;font-weight:900;">STYLE THAT PERFORMS</h2>
<div class="underline"></div>

<!-- Carousel-->
<section>
  <div class="swiper-container">
    <div class="swiper">
      <div class="swiper-wrapper">
        <div class="swiper-slide">
          <div class="slider-content">
            <img src="image/carousel.png" />
          </div>
        </div>
        <div class="swiper-slide">
          <div class="slider-content">
            <img src="image/carousel1.png" />
          </div>
        </div>
        <div class="swiper-slide">
          <div class="slider-content">
            <img src="image/carousel2.png" />
          </div>
        </div>
        <div class="swiper-slide">
          <div class="slider-content">
            <img src="image/carousel3.png" />
          </div>
        </div>
        <div class="swiper-slide">
          <div class="slider-content">
            <img src="image/carousel4.png" />
          </div>
        </div>
      </div>
      <div class="swiper-pagination"></div>
    </div>
  </div>
</section>

<section class="featured-products container my-5">
  <h2 style="font-family: 'Poppins', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;font-weight:900;">FEATURED PRODUCTS</h2>
  <div class="underline"></div>

  <div class="row g-4">
    <% if (typeof featuredProducts !== 'undefined' && featuredProducts.length > 0) { %>
      <% featuredProducts.forEach(p => { %>
        <% const _href = (p && p.id) ? ('/products/' + p.id) : '/products'; %>
        <div class="col-6 col-md-3">
          <a href="/products/<%= p.id %>" class="product-card" style="color:inherit;text-decoration:none;display:block;">
                    <% const _isNew = !!p.is_new; %>
                    <% if (p.promo_active && Number(p.promo_percent || 0) > 0) { %>
                      <div class="discount-badge">-<%= Number(p.promo_percent) %>%</div>
                    <% } %>
                    <% if (_isNew) { %>
                      <div class="product-badges" aria-hidden="false">
                        <div class="badge-new" role="status" aria-label="New product">
                          <i class="bi bi-star-fill" aria-hidden="true"></i>
                          <span class="badge-text">NEW</span>
                          <span class="visually-hidden">New product</span>
                        </div>
                      </div>
                    <% } %>
                    <img src="<%= p.image %>" alt="<%= p.name %>">

              <div class="product-price">
                <% const __p = Number(p.price || 0); const __pp = Number(p.promo_percent || 0); const __on = !!p.promo_active && __pp > 0; const __pd = __on ? (__p * (1 - (__pp/100))) : __p; %>
                <% if (__on) { %>
                  <span class="price-new" style="font-weight:700;text-transform:uppercase;">$<%= __pd.toFixed(2) %></span>
                  <span class="price-old" style="font-weight:700;text-transform:uppercase;">$<%= __p.toFixed(2) %></span>
                <% } else { %>
                  <span class="price-new" style="font-weight:700;text-transform:uppercase;">$<%= __p.toFixed(2) %></span>
                <% } %>
              </div>
              <div class="product-name">
                  <span style="font-weight:700;text-transform:uppercase;"> <%= p.name %> </span>
              </div>

              <div class="bottom-row">
              </div>
          </a>
        </div>
      <% }) %>
    <% } else { %>
      <!-- Fallback to static placeholders when no featuredProducts provided -->
      <div class="col-6 col-md-3">
        <a href="/products" class="product-card text-center">
          <img src="image/fp1.png" alt="Product 1" class="img-fluid mb-3">
          <h5 class="fw-semibold">Product Name 1</h5>
          <p class="text-dark">WOMEN</p>
          <p class="price">$49.99</p>
        </a>
      </div>
      <div class="col-6 col-md-3">
        <a href="/products" class="product-card text-center">
          <img src="image/fp2.png" alt="Product 2" class="img-fluid mb-3">
          <h5 class="fw-semibold">Product Name 2</h5>
          <p class="text-dark">MEN</p>
          <p class="price">$234</p>
        </a>
      </div>
      <div class="col-6 col-md-3">
        <a href="/products" class="product-card text-center">
          <img src="image/fp3.png" alt="Product 3" class="img-fluid mb-3">
          <h5 class="fw-semibold">Product Name 3</h5>
          <p class="text-dark">WOMEN</p>
          <p class="price">$120</p>
        </a>
      </div>
      <div class="col-6 col-md-3">
        <a href="/products" class="product-card text-center">
          <img src="image/fp4.png" alt="Product 4" class="img-fluid mb-3">
          <h5 class="fw-semibold">Product Name 4</h5>
          <p class="text-dark">MEN</p>
          <p class="price">$124</p>
        </a>
      </div>
    <% } %>
  </div>
</section>



    <!-- Dynamic Content Section -->
<section class="dynamic-content">
  <h2 style="font-family: 'Poppins', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;font-weight:900;">Promotions & New Arrivals</h2>
    <div class="underline"></div>
    <div class="promotions">
        <div class="promotions-item">
            <img src="image/promo1.png" alt="Promotion 1">
            <h3>Special Offer</h3>
            <p>Get 20% off on all gym wear this week!</p>
        </div>
        <div class="promotions-item">
            <img src="image/new1.png" alt="New Arrival 1">
            <h3>New Arrival</h3>
            <p>Check out our latest fitness leggings!</p>
        </div>
        <div class="promotions-item">
            <img src="image/popular1.png" alt="Popular Product 1">
            <h3>Popular Pick</h3>
            <p>Top-rated running shoes now in stock.</p>
        </div>
    </div>
</section>


    <!-- Footer -->
    <footer>
    <%- include ("../partials/footer.ejs") %>
    </footer>





<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
<script type="text/javascript">
var swiper = new Swiper(".swiper", {
  effect: "coverflow",
  grabCursor: false,
  centeredSlides: true,
  spaceBetween: 10,
  coverflowEffect: {
    rotate: 0,
    stretch: 0,
    depth: 100,
    modifier: 4,
    slideShadows: false,
  },
  loop: true,
  autoplay: {
    delay: 2000,
    disableOnInteraction: false,
  },
  pagination: {
    el: ".swiper-pagination",
    clickable: true,
  },
  keyboard: {
    enabled: true,
  },
  breakpoints: {
    560: {
      slidesPerView: 2.5,
    },
    768: {
      slidesPerView: 3,
    },
    1024: {
      slidesPerView: 3,
    },
  },
});

</script>

<script>
  // Make .shop-cta spans behave like links (click + keyboard Enter)
  document.addEventListener('click', function(e){
    const s = e.target.closest('.shop-cta');
    if (!s) return;
    const href = s.getAttribute('data-href');
    if (href) {
      window.location.href = href;
    }
  });

  document.addEventListener('keydown', function(e){
    if (e.key !== 'Enter') return;
    const active = document.activeElement;
    if (active && active.classList && active.classList.contains('shop-cta')) {
      const href = active.getAttribute('data-href');
      if (href) window.location.href = href;
    }
  });
</script>

 

<!-- Banned-user modal: shows to logged-in users whose account is banned -->
<div class="modal fade" id="bannedUserModal" tabindex="-1" aria-labelledby="bannedUserModalTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-body">
        <h5 id="bannedUserModalTitle">Account restricted</h5>
        <p>Your account has been banned and cannot make purchases or access certain features. If you believe this is a mistake, please contact our support team.</p>
      </div>
      <div class="modal-footer">
        <a href="/contact" class="btn btn-link">Contact support</a>
        <a href="/logout" class="btn btn-secondary">Log out</a>
      </div>
    </div>
  </div>
</div>

<script>
  // Show banned modal when header exposes data-banned="true"
  (function(){
    try {
      const flags = document.getElementById('appFlags');
      if (!flags) return;
      const isBanned = flags.dataset && flags.dataset.banned === 'true';
      if (!isBanned) return;
      const modalEl = document.getElementById('bannedUserModal');
      if (!modalEl) return;
      if (window.bootstrap && bootstrap.Modal) {
        const m = new bootstrap.Modal(modalEl, { backdrop: 'static', keyboard: false });
        m.show();
      } else {
        // fallback: make it visible
        modalEl.style.display = 'block';
      }
    } catch (e) {
      console.warn('Failed to show banned modal', e);
    }
  })();
</script>

</body>
</html>
